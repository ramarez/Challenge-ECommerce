import{a as N,b as V}from"./chunk-ZCXJ7NBP.js";import{b as ue,c as E,d as pe,e as fe,f as ge,g as H,h as he,j as ve,l as xe,m as be,o as we,p as Ce,q as k,r as O,s as q}from"./chunk-63WTHMUR.js";import{b as R,c as ae,d as se,e as le,f as me,h as ce,i as _,j as A,k as de,l as P,o as ye,p as U}from"./chunk-3RQMILY2.js";import"./chunk-SIB3WHKF.js";import{n as S}from"./chunk-444QTUGO.js";import{$a as L,B as K,Ha as a,Ia as g,Mb as ne,Ta as d,U as w,V as X,Ya as v,Z as j,_ as Z,ab as m,bb as Y,ca as f,cb as J,da as Q,db as ee,eb as o,fb as n,gb as l,ib as D,lb as C,ma as T,mb as u,na as F,nb as te,oa as M,ob as ie,pa as B,q as G,rb as re,sa as I,sb as oe,tb as s,ub as b,xa as W,xb as h,yb as y}from"./chunk-4HOZ256F.js";function Ae(t,c){if(t&1&&(o(0,"div",3)(1,"div"),s(2),n()()),t&2){let e=u();a(2),b(e.message)}}function Pe(t,c){t&1&&(o(0,"div"),s(1,"Email is required."),n())}function Ne(t,c){t&1&&(o(0,"div"),s(1,"Invalid email format."),n())}function Oe(t,c){if(t&1&&(o(0,"div",3),d(1,Pe,2,0,"div")(2,Ne,2,0,"div"),n()),t&2){let e=u();a(),m(e.email.errors!=null&&e.email.errors.required?1:-1),a(),m(e.email.errors!=null&&e.email.errors.email?2:-1)}}function qe(t,c){t&1&&(o(0,"div"),s(1,"Password is required."),n())}function Ve(t,c){t&1&&(o(0,"div"),s(1," Password must be at least 4 characters long. "),n())}function Be(t,c){if(t&1&&(o(0,"div",3),d(1,qe,2,0,"div")(2,Ve,2,0,"div"),n()),t&2){let e=u();a(),m(e.password.errors!=null&&e.password.errors.required?1:-1),a(),m(e.password.errors!=null&&e.password.errors.minlength?2:-1)}}var z=(()=>{class t{accountService;router;message="";loginForm=new ge({email:new H("",[E.required,E.email]),password:new H("",[E.required,E.minLength(4)])});constructor(e,i){this.accountService=e,this.router=i}onSubmit(){this.message="",this.accountService.login(this.email?.value,this.password?.value).then(()=>this.router.navigateByUrl("/products")).catch(e=>this.message=e)}get password(){return this.loginForm.get("password")}get email(){return this.loginForm.get("email")}static \u0275fac=function(i){return new(i||t)(g(N),g(_))};static \u0275cmp=f({type:t,selectors:[["app-login"]],standalone:!0,features:[h],decls:23,vars:5,consts:[[1,"flex","min-h-full","flex-col","justify-center","px-6","py-12","lg:px-8"],[1,"sm:mx-auto","sm:w-full","sm:max-w-sm"],[1,"mt-10","text-center","text-2xl","font-bold","leading-9","tracking-tight","text-gray-900"],[1,"alert","alert-danger"],[1,"mt-10","sm:mx-auto","sm:w-full","sm:max-w-sm"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","email",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["id","email","name","email","type","email","autocomplete","email","required","","formControlName","email",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[1,"flex","items-center","justify-between"],["for","password",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["id","password","name","password","type","password","autocomplete","current-password","required","","formControlName","password",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],["type","submit",1,"flex","w-full","justify-center","rounded-md","bg-indigo-600","px-3","py-1.5","text-sm","font-semibold","leading-6","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"disabled"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),s(3,"Log in to your ECommerce account"),n(),d(4,Ae,3,1,"div",3),n(),o(5,"div",4)(6,"form",5),C("ngSubmit",function(){return r.onSubmit()}),o(7,"div")(8,"label",6),s(9,"Email address"),n(),o(10,"div",7),l(11,"input",8),d(12,Oe,3,2,"div",3),n()(),o(13,"div")(14,"div",9)(15,"label",10),s(16,"Password"),n()(),o(17,"div",7),l(18,"input",11),d(19,Be,3,2,"div",3),n()(),o(20,"div")(21,"button",12),s(22,"Log in"),n()()()()()),i&2&&(a(4),m(r.message!==""?4:-1),a(2),v("formGroup",r.loginForm),a(6),m(r.email.invalid&&(r.email.dirty||r.email.touched)?12:-1),a(7),m(r.password.invalid&&(r.password.dirty||r.password.touched)?19:-1),a(2),v("disabled",!r.loginForm.valid))},dependencies:[Ce,he,ue,pe,fe,be,ve,xe,S,we]})}return t})();var Se=[{path:"login",component:z},{path:"logout",component:z},{path:"products",loadChildren:()=>import("./chunk-LJKGVUHZ.js").then(t=>t.ProductsModule)},{path:"cart",loadChildren:()=>import("./chunk-4IQFG5BZ.js").then(t=>t.ShoppingModule)},{path:"",redirectTo:"products",pathMatch:"full"},{path:"**",redirectTo:"products",pathMatch:"full"}];function Re(t,c){if(t&1&&(o(0,"p",2),s(1),n()),t&2){let e=u().$implicit;a(),b(e.header)}}function He(t,c){if(t&1){let e=D();o(0,"div")(1,"div"),d(2,Re,2,1,"p",2),o(3,"p",3),s(4),n()(),o(5,"button",4),C("click",function(){let r=T(e).$implicit,p=u(2);return F(p.removeMessage(r))}),o(6,"span",5),s(7,"Dismiss"),n(),M(),o(8,"svg",6),l(9,"path",7),n()()()}if(t&2){let e=c.$implicit,i=u(2);L(i.ccsClass(e,1)),a(),L(i.ccsClass(e,2)),a(),m(e.header?2:-1),a(2),b(e.message),a(),L(i.ccsClass(e,3))}}function Ue(t,c){if(t&1&&(o(0,"div",0),J(1,He,10,8,"div",1,Y),n()),t&2){let e=u();a(),ee(e.messages)}}var _e=(()=>{class t{router;messageService;id="default-message";fade=!0;messages=[];messageSubscription;routeSubscription;constructor(e,i){this.router=e,this.messageService=i}ngOnInit(){this.messageSubscription=this.messageService.onAlert(this.id).subscribe(e=>{if(!e.message){this.messages=this.messages.filter(i=>i.keepAfterRouteChange),this.messages.forEach(i=>delete i.keepAfterRouteChange);return}this.messages.push(e),e.autoClose&&setTimeout(()=>this.removeMessage(e),3e3)}),this.routeSubscription=this.router.events.subscribe(e=>{e instanceof me&&this.messageService.clear(this.id)})}ngOnDestroy(){this.messageSubscription.unsubscribe(),this.routeSubscription.unsubscribe()}removeMessage(e){if(!this.messages.includes(e))return;let i=this.fade?250:0;e.fade=this.fade,setTimeout(()=>{this.messages=this.messages.filter(r=>r!==e)},i)}ccsClass(e,i){switch(e.type){case k.Success:switch(i){case 1:return"flex items-center bg-green-100";case 2:return"w-full bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-lg";case 3:return"ms-auto -my-1.5 text-green-500 rounded-lg focus:ring-2 focus:ring-green-400 p-1.5 hover:bg-green-200 inline-flex items-center justify-center h-8 w-8"}break;case k.Error:switch(i){case 1:return"flex items-center bg-red-100";case 2:return"w-full bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg";case 3:return"ms-auto -my-1.5 text-red-500 rounded-lg focus:ring-2 focus:ring-red-400 p-1.5 hover:bg-red-200 inline-flex items-center justify-center h-8 w-8"}break;case k.Info:switch(i){case 1:return"flex items-center bg-blue-100";case 2:return"w-full bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 rounded-lg";case 3:return"ms-auto -my-1.5 text-blue-500 rounded-lg focus:ring-2 focus:ring-blue-400 p-1.5 hover:bg-blue-200 inline-flex items-center justify-center h-8 w-8"}break;case k.Warning:switch(i){case 1:return"flex items-center bg-yellow-100";case 2:return"w-full bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-lg";case 3:return"ms-auto -my-1.5 text-yellow-500 rounded-lg focus:ring-2 focus:ring-yellow-400 p-1.5 hover:bg-yellow-200 inline-flex items-center justify-center h-8 w-8"}break}return""}static \u0275fac=function(i){return new(i||t)(g(_),g(O))};static \u0275cmp=f({type:t,selectors:[["app-message"]],inputs:{id:"id",fade:"fade"},standalone:!0,features:[h],decls:1,vars:1,consts:[["id","toast-top-right","role","alert",1,"fixed","items-center","w-full","md:max-w-md","max-w-xs","bg-white","rtl:divide-x-reverse","rounded-lg","shadow","top-5","right-5","z-50"],[3,"class"],[1,"text-lg","font-semibold"],[1,"text-sm","font-normal"],["type","button","aria-label","Close",3,"click"],[1,"sr-only"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"]],template:function(i,r){i&1&&d(0,Ue,3,0,"div",0),i&2&&m(r.messages.length!==0?0:-1)}})}return t})();var Me=(()=>{class t{injector;constructor(e){this.injector=e}intercept(e,i){return i.handle(e).pipe(K(r=>{switch(r.status){case U.Status400BadRequest:this.handleStatus400BadRequest(r);break;case U.Status403Forbidden:this.handleStatus403Forbidden(r);break;default:this.handleOtherError(r)}return G(()=>r)}))}showMessageError(e){let i=this.injector.get(O,null);i&&i.error(e,"Http Response: Error",{autoClose:!0,keepAfterRouteChange:!0})}handleOtherError(e){let i=e.message??"An error has occurred at the website and your support team will need to fix the problem. A preliminary report has been sent to the support team.Please do follow - up on the preliminary report using the Report a Problem page";typeof e.error=="object"?e.error.error&&e.error.error.message&&(i=e.error.error.message):i=e.error,this.showMessageError(i)}handleStatus400BadRequest(e){let i=e.message??"Request not understood. There may be a network issue. Please attempt to submit your request again. If this problem persists, please use the Report a Problem page found on the menu to alert your support team.";return typeof e.error=="object"?(e.error.error&&e.error.error.message&&(i=e.error.error.message),e.error&&(i=Object.keys(e.error).map(r=>`${r}: ${Array.isArray(e.error[r])?e.error[r].join(", "):e.error[r]}`).join(`
`))):i=e.error,this.showMessageError(i),!1}handleStatus403Forbidden(e){this.showMessageError("You don\u2019t have authorisation for this feature. Please refresh your page. If this problem persists, please use the Report a Problem page found on the menu to alert your support team.")}static \u0275fac=function(i){return new(i||t)(j(I))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})();var Ee=(()=>{class t{injector;static previousMessage;static latestErrorTime;constructor(e){this.injector=e,t.latestErrorTime=new Date().getTime(),t.previousMessage=""}handleError(e){let i=new Date().getTime();if(e.message!==t.previousMessage||i-t.latestErrorTime>5e3){t.previousMessage=e.message,t.latestErrorTime=i;let r=this.injector.get(V),p=r?r.currentUser:null;p&&console.log("GlobalErrorHandler",p,e.message)}}static \u0275fac=function(i){return new(i||t)(j(I))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})();var ke=(()=>{class t{requestTokenKey="XSRF-REQUEST-TOKEN";intercept(e,i){let r=e.headers,p=ye.getItem(this.requestTokenKey);return p&&(r=r.set("X-XSRF-TOKEN",p)),e=e.clone({url:`${e.url}`,headers:r}),i.handle(e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})();var je={providers:[ne({eventCoalescing:!0}),de(Se),ae(se()),{provide:R,useClass:Me,multi:!0},{provide:R,useClass:ke,multi:!0},{provide:W,useClass:Ee},q]};var ze=["*"],Ge=()=>["/products"],Ke=()=>["/products/product-search"],Xe=()=>["/cart"],Te=(()=>{class t{store=Z(q);static \u0275fac=function(i){return new(i||t)};static \u0275cmp=f({type:t,selectors:[["app-navbar"]],standalone:!0,features:[h],ngContentSelectors:ze,decls:25,vars:10,consts:[["linksDiv",""],[1,"block","w-full","bg-gray-800","px-4","py-4","sm:flex","sm:items-center","sm:justify-between"],[1,"flex","justify-between","sm:block"],[1,"block","text-2xl","font-bold","text-white"],[1,"block","bg-transparent","sm:hidden"],["type","checkbox","id","toggle",1,"invisible","appearance-none"],["for","toggle"],["id","menu-icon","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",1,"cursor-pointer","inline-block","text-white",2,"fill","rgba(255, 255, 255, 1)"],["d","M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"],["id","close-icon","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",1,"hidden","cursor-pointer","text-white",2,"fill","rgba(255, 255, 255, 1)"],["d","m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z"],["id","navigation",1,"flex","h-0","flex-col","items-center","gap-4","overflow-hidden","text-white","transition-all","duration-500","ease-in-out","sm:h-auto","sm:flex-row","sm:overflow-auto"],[3,"routerLink"],[1,"relative","inline-flex","items-center","p-3","text-sm","font-medium","text-center","rounded-lg",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-7","h-7","text-white","rounded-full","ring-2","ring-white","p-1","relative"],["stroke-linecap","round","stroke-linejoin","round","d","M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"],[1,"sr-only"],[1,"absolute","inline-flex","items-center","justify-center","w-5","h-5","text-xs","font-bold","text-white","bg-red-500","border-2","border-white","rounded-full","top-1","end-1"]],template:function(i,r){if(i&1&&(te(),o(0,"header",1)(1,"div",2)(2,"a",3),s(3,"Challenger - ECommerce"),n(),o(4,"button",4),l(5,"input",5),o(6,"label",6),M(),o(7,"svg",7),l(8,"path",8),n(),o(9,"svg",9),l(10,"path",10),n()()()(),B(),o(11,"div",11,0)(13,"a",12),s(14,"Products"),n(),o(15,"a",12),s(16,"Search Products"),n(),o(17,"a",13),M(),o(18,"svg",14),l(19,"path",15),n(),B(),o(20,"span",16),s(21,"Notifications"),n(),o(22,"div",17),s(23),n()(),ie(24),n()()),i&2){let p=re(12);a(11),oe("--menu-height: ",p.children.length*2.5,"rem"),a(2),v("routerLink",y(7,Ge)),a(2),v("routerLink",y(8,Ke)),a(2),v("routerLink",y(9,Xe)),a(6),b(r.store.itemsCount())}},dependencies:[P,A],styles:["[_nghost-%COMP%]{display:block}@media screen and (max-width: 639px){header[_ngcontent-%COMP%]:has(#toggle:checked)   #navigation[_ngcontent-%COMP%]{height:var(--menu-height, 10rem)}header[_ngcontent-%COMP%]:has(#toggle:checked)   #menu-icon[_ngcontent-%COMP%]{display:none}header[_ngcontent-%COMP%]:has(#toggle:checked)   #close-icon[_ngcontent-%COMP%]{display:inline-block}}"],changeDetection:0})}return t})();var Fe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=f({type:t,selectors:[["app-footer"]],standalone:!0,features:[h],decls:3,vars:0,consts:[[1,"mx-auto","bg-gray-800","mb-4","px-2","md:px-4"],[1,"flex","font-bold","text-white","justify-center","px-2","md:px-0","py-2"]],template:function(i,r){i&1&&(o(0,"footer",0)(1,"div",1),s(2," \xA9 Challenger Inc. All rights reserved. "),n()())}})}return t})();var Ie=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Q({type:t});static \u0275inj=X({imports:[S]})}return t})();var Ze=()=>["/login"];function Qe(t,c){t&1&&(o(0,"a",0),s(1,"Login"),n()),t&2&&v("routerLink",y(1,Ze))}function We(t,c){if(t&1){let e=D();o(0,"div",1)(1,"a",3),C("click",function(){T(e);let r=u();return F(r.logout())}),s(2,"Logout"),n()()}}var Le=(()=>{class t{accountService;userService;router;title="Challenge-ECommerce";constructor(e,i,r){this.accountService=e,this.userService=i,this.router=r}logout(){this.accountService.logout().then(()=>this.router.navigateByUrl("/login"))}get isLogged(){return this.userService.isLogged}static \u0275fac=function(i){return new(i||t)(g(N),g(V),g(_))};static \u0275cmp=f({type:t,selectors:[["app-root"]],standalone:!0,features:[h],decls:7,vars:1,consts:[[1,"bg-blue-50","text-blue-500","px-2","py-1","rounded",3,"routerLink"],[1,"flex","justify-items-center","items-center","gap-2"],[1,"max-w-screen-xl","min-h-screen-85","md:min-h-screen-90","mx-auto","mb-8","pt-10","px-4"],[1,"bg-blue-50","text-blue-500","px-2","py-1","rounded","cursor-hand",3,"click"]],template:function(i,r){i&1&&(o(0,"app-navbar"),d(1,Qe,2,2,"a",0)(2,We,3,0,"div",1),n(),l(3,"app-message"),o(4,"div",2),l(5,"router-outlet"),n(),l(6,"app-footer")),i&2&&(a(),m(r.isLogged?2:1))},dependencies:[ce,S,Te,P,A,Fe,Ie,_e],styles:[".cursor-hand[_ngcontent-%COMP%]{cursor:pointer}"]})}return t})();le(Le,je).catch(t=>console.error(t));
