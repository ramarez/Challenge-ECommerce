import{a as M,b as ye,c as E}from"./chunk-NBRKPKIM.js";import{A as xe,B as be,D as we,E as Ce,F,G as D,H as O,c as y,e as V,f as se,g as le,h as ce,i as me,k as ue,l as _,m as R,n as de,o as q,q as pe,r as T,s as ge,t as fe,u as he,v as B,w as ve,y as Se}from"./chunk-H7W7OBCP.js";import{$a as l,Ba as a,Ca as f,Cb as ae,Na as u,P as b,Q as X,Sa as v,U as j,Ua as A,V as Z,Va as m,Wa as Y,Xa as J,Ya as ee,Z as g,Za as r,_ as Q,_a as n,ab as N,db as w,eb as d,fb as te,ga as L,gb as ie,ha as I,ia as k,ja as U,jb as oe,kb as re,lb as s,ma as P,mb as x,o as $,ob as ne,pb as h,qb as C,ra as W,z as K}from"./chunk-43GAKS5M.js";function Ne(t,c){if(t&1&&(r(0,"div",3)(1,"div"),s(2),n()()),t&2){let e=d();a(2),x(e.message)}}function Re(t,c){t&1&&(r(0,"div"),s(1,"Email is required."),n())}function qe(t,c){t&1&&(r(0,"div"),s(1,"Invalid email format."),n())}function De(t,c){if(t&1&&(r(0,"div",3),u(1,Re,2,0,"div")(2,qe,2,0,"div"),n()),t&2){let e=d();a(),m(e.email.errors!=null&&e.email.errors.required?1:-1),a(),m(e.email.errors!=null&&e.email.errors.email?2:-1)}}function Oe(t,c){t&1&&(r(0,"div"),s(1,"Password is required."),n())}function Ue(t,c){t&1&&(r(0,"div"),s(1," Password must be at least 4 characters long. "),n())}function Ve(t,c){if(t&1&&(r(0,"div",3),u(1,Oe,2,0,"div")(2,Ue,2,0,"div"),n()),t&2){let e=d();a(),m(e.password.errors!=null&&e.password.errors.required?1:-1),a(),m(e.password.errors!=null&&e.password.errors.minlength?2:-1)}}var G=(()=>{class t{accountService;router;message="";loginForm=new he({email:new B("",[T.required,T.email]),password:new B("",[T.required,T.minLength(4)])});constructor(e,i){this.accountService=e,this.router=i}onSubmit(){this.message="",this.accountService.login(this.email?.value,this.password?.value).then(()=>this.router.navigateByUrl("/products")).catch(e=>this.message=e)}get password(){return this.loginForm.get("password")}get email(){return this.loginForm.get("email")}static \u0275fac=function(i){return new(i||t)(f(M),f(_))};static \u0275cmp=g({type:t,selectors:[["app-login"]],standalone:!0,features:[h],decls:23,vars:5,consts:[[1,"flex","min-h-full","flex-col","justify-center","px-6","py-12","lg:px-8"],[1,"sm:mx-auto","sm:w-full","sm:max-w-sm"],[1,"mt-10","text-center","text-2xl","font-bold","leading-9","tracking-tight","text-gray-900"],[1,"alert","alert-danger"],[1,"mt-10","sm:mx-auto","sm:w-full","sm:max-w-sm"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","email",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["id","email","name","email","type","email","autocomplete","email","required","","formControlName","email",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[1,"flex","items-center","justify-between"],["for","password",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["id","password","name","password","type","password","autocomplete","current-password","required","","formControlName","password",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],["type","submit",1,"flex","w-full","justify-center","rounded-md","bg-indigo-600","px-3","py-1.5","text-sm","font-semibold","leading-6","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"disabled"]],template:function(i,o){i&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2),s(3,"Log in to your ECommerce account"),n(),u(4,Ne,3,1,"div",3),n(),r(5,"div",4)(6,"form",5),w("ngSubmit",function(){return o.onSubmit()}),r(7,"div")(8,"label",6),s(9,"Email address"),n(),r(10,"div",7),l(11,"input",8),u(12,De,3,2,"div",3),n()(),r(13,"div")(14,"div",9)(15,"label",10),s(16,"Password"),n()(),r(17,"div",7),l(18,"input",11),u(19,Ve,3,2,"div",3),n()(),r(20,"div")(21,"button",12),s(22,"Log in"),n()()()()()),i&2&&(a(4),m(o.message!==""?4:-1),a(2),v("formGroup",o.loginForm),a(6),m(o.email.invalid&&(o.email.dirty||o.email.touched)?12:-1),a(7),m(o.password.invalid&&(o.password.dirty||o.password.touched)?19:-1),a(2),v("disabled",!o.loginForm.valid))},dependencies:[Ce,ve,pe,ge,fe,be,Se,xe,y,we]})}return t})();var _e=[{path:"login",component:G},{path:"logout",component:G},{path:"products",loadChildren:()=>import("./chunk-PC6TWZ6S.js").then(t=>t.ProductsModule)},{path:"cart",loadChildren:()=>import("./chunk-JLBHQ3AU.js").then(t=>t.ShoppingModule)},{path:"",redirectTo:"products",pathMatch:"full"},{path:"**",redirectTo:"products",pathMatch:"full"}];var z=(()=>{class t{static Status100Continue=100;static Status101SwitchingProtocols=101;static Status102Processing=102;static Status200OK=200;static Status201Created=201;static Status202Accepted=202;static Status203NonAuthoritative=203;static Status204NoContent=204;static Status205ResetContent=205;static Status206PartialContent=206;static Status207MultiStatus=207;static Status208AlreadyReported=208;static Status226IMUsed=226;static Status300MultipleChoices=300;static Status301MovedPermanently=301;static Status302Found=302;static Status303SeeOther=303;static Status304NotModified=304;static Status305UseProxy=305;static Status306SwitchProxy=306;static Status307TemporaryRedirect=307;static Status308PermanentRedirect=308;static Status400BadRequest=400;static Status401Unauthorized=401;static Status402PaymentRequired=402;static Status403Forbidden=403;static Status404NotFound=404;static Status405MethodNotAllowed=405;static Status406NotAcceptable=406;static Status407ProxyAuthenticationRequired=407;static Status408RequestTimeout=408;static Status409Conflict=409;static Status410Gone=410;static Status411LengthRequired=411;static Status412PreconditionFailed=412;static Status413RequestEntityTooLarge=413;static Status413PayloadTooLarge=413;static Status414RequestUriTooLong=414;static Status414UriTooLong=414;static Status415UnsupportedMediaType=415;static Status416RequestedRangeNotSatisfiable=416;static Status416RangeNotSatisfiable=416;static Status417ExpectationFailed=417;static Status418ImATeapot=418;static Status419AuthenticationTimeout=419;static Status421MisdirectedRequest=421;static Status422UnprocessableEntity=422;static Status423Locked=423;static Status424FailedDependency=424;static Status426UpgradeRequired=426;static Status428PreconditionRequired=428;static Status429TooManyRequests=429;static Status431RequestHeaderFieldsTooLarge=431;static Status451UnavailableForLegalReasons=451;static Status500InternalServerError=500;static Status501NotImplemented=501;static Status502BadGateway=502;static Status503ServiceUnavailable=503;static Status504GatewayTimeout=504;static Status505HttpVersionNotsupported=505;static Status506VariantAlsoNegotiates=506;static Status507InsufficientStorage=507;static Status508LoopDetected=508;static Status510NotExtended=510;static Status511NetworkAuthenticationRequired=511;static Msg801Level16State1=801}return t})();var Me=(()=>{class t{injector;constructor(e){this.injector=e}intercept(e,i){return i.handle(e).pipe(K(o=>{switch(o.status){case z.Status400BadRequest:this.handleStatus400BadRequest(o);break;case z.Status403Forbidden:this.handleStatus403Forbidden(o);break;default:this.handleOtherError(o)}return $(()=>o)}))}showMessageError(e){let i=this.injector.get(D,null);i&&i.error(e,void 0,{autoClose:!0,keepAfterRouteChange:!0})}handleOtherError(e){let i=e.message??"An error has occurred at the website and your support team will need to fix the problem. A preliminary report has been sent to the support team.Please do follow - up on the preliminary report using the Report a Problem page";typeof e.error=="object"?e.error.error&&e.error.error.message&&(i=e.error.error.message):i=e.error,this.showMessageError(i)}handleStatus400BadRequest(e){let i=e.message??"Request not understood. There may be a network issue. Please attempt to submit your request again. If this problem persists, please use the Report a Problem page found on the menu to alert your support team.";return typeof e.error=="object"?(e.error.error&&e.error.error.message&&(i=e.error.error.message),e.error&&(i=Object.keys(e.error).map(o=>`${o}: ${Array.isArray(e.error[o])?e.error[o].join(", "):e.error[o]}`).join(`
`))):i=e.error,this.showMessageError(i),!1}handleStatus403Forbidden(e){this.showMessageError("You don\u2019t have authorisation for this feature. Please refresh your page. If this problem persists, please use the Report a Problem page found on the menu to alert your support team.")}static \u0275fac=function(i){return new(i||t)(j(P))};static \u0275prov=b({token:t,factory:t.\u0275fac})}return t})();var Ee=(()=>{class t{injector;static previousMessage;static latestErrorTime;constructor(e){this.injector=e,t.latestErrorTime=new Date().getTime(),t.previousMessage=""}handleError(e){let i=new Date().getTime();if(e.message!==t.previousMessage||i-t.latestErrorTime>5e3){t.previousMessage=e.message,t.latestErrorTime=i;let o=this.injector.get(E),p=o?o.currentUser:null;p&&console.log("GlobalErrorHandler",p,e.message)}}static \u0275fac=function(i){return new(i||t)(j(P))};static \u0275prov=b({token:t,factory:t.\u0275fac})}return t})();var ke=(()=>{class t{requestTokenKey="XSRF-REQUEST-TOKEN";intercept(e,i){let o=e.headers,p=ye.getItem(this.requestTokenKey);return p&&(o=o.set("X-XSRF-TOKEN",p)),e=e.clone({url:`${e.url}`,headers:o}),i.handle(e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=b({token:t,factory:t.\u0275fac})}return t})();var Te={providers:[ae({eventCoalescing:!0}),de(_e),se(le()),{provide:V,useClass:Me,multi:!0},{provide:V,useClass:ke,multi:!0},{provide:W,useClass:Ee},O]};var Be=["*"],He=()=>["/products"],Ge=()=>["/products/search-products"],ze=()=>["/cart"],Fe=(()=>{class t{store=Z(O);static \u0275fac=function(i){return new(i||t)};static \u0275cmp=g({type:t,selectors:[["app-navbar"]],standalone:!0,features:[h],ngContentSelectors:Be,decls:25,vars:10,consts:[["linksDiv",""],[1,"block","w-full","bg-gray-800","px-4","py-4","sm:flex","sm:items-center","sm:justify-between"],[1,"flex","justify-between","sm:block"],[1,"block","text-2xl","font-bold","text-white"],[1,"block","bg-transparent","sm:hidden"],["type","checkbox","id","toggle",1,"invisible","appearance-none"],["for","toggle"],["id","menu-icon","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",1,"cursor-pointer","inline-block","text-white",2,"fill","rgba(255, 255, 255, 1)"],["d","M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"],["id","close-icon","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",1,"hidden","cursor-pointer","text-white",2,"fill","rgba(255, 255, 255, 1)"],["d","m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z"],["id","navigation",1,"flex","h-0","flex-col","items-center","gap-4","overflow-hidden","text-white","transition-all","duration-500","ease-in-out","sm:h-auto","sm:flex-row","sm:overflow-auto"],[3,"routerLink"],[1,"relative","inline-flex","items-center","p-3","text-sm","font-medium","text-center","rounded-lg",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-7","h-7","text-white","rounded-full","ring-2","ring-white","p-1","relative"],["stroke-linecap","round","stroke-linejoin","round","d","M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"],[1,"sr-only"],[1,"absolute","inline-flex","items-center","justify-center","w-5","h-5","text-xs","font-bold","text-white","bg-red-500","border-2","border-white","rounded-full","top-1","end-1"]],template:function(i,o){if(i&1&&(te(),r(0,"header",1)(1,"div",2)(2,"a",3),s(3,"Challenger - ECommerce"),n(),r(4,"button",4),l(5,"input",5),r(6,"label",6),k(),r(7,"svg",7),l(8,"path",8),n(),r(9,"svg",9),l(10,"path",10),n()()()(),U(),r(11,"div",11,0)(13,"a",12),s(14,"Products"),n(),r(15,"a",12),s(16,"Search Products"),n(),r(17,"a",13),k(),r(18,"svg",14),l(19,"path",15),n(),U(),r(20,"span",16),s(21,"Notifications"),n(),r(22,"div",17),s(23),n()(),ie(24),n()()),i&2){let p=oe(12);a(11),re("--menu-height: ",p.children.length*2.5,"rem"),a(2),v("routerLink",C(7,He)),a(2),v("routerLink",C(8,Ge)),a(2),v("routerLink",C(9,ze)),a(6),x(o.store.itemsCount())}},dependencies:[q,R],styles:["[_nghost-%COMP%]{display:block}@media screen and (max-width: 639px){header[_ngcontent-%COMP%]:has(#toggle:checked)   #navigation[_ngcontent-%COMP%]{height:var(--menu-height, 10rem)}header[_ngcontent-%COMP%]:has(#toggle:checked)   #menu-icon[_ngcontent-%COMP%]{display:none}header[_ngcontent-%COMP%]:has(#toggle:checked)   #close-icon[_ngcontent-%COMP%]{display:inline-block}}"],changeDetection:0})}return t})();var je=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=g({type:t,selectors:[["app-footer"]],standalone:!0,features:[h],decls:3,vars:0,consts:[[1,"mx-auto","bg-gray-800","mb-4","px-2","md:px-4"],[1,"flex","font-bold","text-white","justify-center","px-2","md:px-0","py-2"]],template:function(i,o){i&1&&(r(0,"footer",0)(1,"div",1),s(2," \xA9 Challenger Inc. All rights reserved. "),n()())}})}return t})();function $e(t,c){if(t&1&&(r(0,"p",2),s(1),n()),t&2){let e=d().$implicit;a(),x(e.header)}}function Ke(t,c){if(t&1){let e=N();r(0,"div")(1,"div"),u(2,$e,2,1,"p",2),r(3,"p",3),s(4),n()(),r(5,"button",4),w("click",function(){let o=L(e).$implicit,p=d(2);return I(p.removeMessage(o))}),r(6,"span",5),s(7,"Dismiss"),n(),k(),r(8,"svg",6),l(9,"path",7),n()()()}if(t&2){let e=c.$implicit,i=d(2);A(i.ccsClass(e,1)),a(),A(i.ccsClass(e,2)),a(),m(e.header?2:-1),a(2),x(e.message),a(),A(i.ccsClass(e,3))}}function Xe(t,c){if(t&1&&(r(0,"div",0),J(1,Ke,10,8,"div",1,Y),n()),t&2){let e=d();a(),ee(e.messages)}}var Le=(()=>{class t{router;messageService;id="default-message";fade=!0;messages=[];messageSubscription;routeSubscription;constructor(e,i){this.router=e,this.messageService=i}ngOnInit(){this.messageSubscription=this.messageService.onAlert(this.id).subscribe(e=>{if(!e.message){this.messages=this.messages.filter(i=>i.keepAfterRouteChange),this.messages.forEach(i=>delete i.keepAfterRouteChange);return}this.messages.push(e),e.autoClose&&setTimeout(()=>this.removeMessage(e),3e3)}),this.routeSubscription=this.router.events.subscribe(e=>{e instanceof me&&this.messageService.clear(this.id)})}ngOnDestroy(){this.messageSubscription.unsubscribe(),this.routeSubscription.unsubscribe()}removeMessage(e){if(!this.messages.includes(e))return;let i=this.fade?250:0;e.fade=this.fade,setTimeout(()=>{this.messages=this.messages.filter(o=>o!==e)},i)}ccsClass(e,i){switch(e.type){case F.Success:switch(i){case 1:return"flex items-center bg-green-100";case 2:return"w-full bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-lg";case 3:return"ms-auto -my-1.5 text-green-500 rounded-lg focus:ring-2 focus:ring-green-400 p-1.5 hover:bg-green-200 inline-flex items-center justify-center h-8 w-8"}break;case F.Error:switch(i){case 1:return"flex items-center bg-red-100";case 2:return"w-full bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg";case 3:return"ms-auto -my-1.5 text-red-500 rounded-lg focus:ring-2 focus:ring-red-400 p-1.5 hover:bg-red-200 inline-flex items-center justify-center h-8 w-8"}break;case F.Info:switch(i){case 1:return"flex items-center bg-blue-100";case 2:return"w-full bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 rounded-lg";case 3:return"ms-auto -my-1.5 text-blue-500 rounded-lg focus:ring-2 focus:ring-blue-400 p-1.5 hover:bg-blue-200 inline-flex items-center justify-center h-8 w-8"}break;case F.Warning:switch(i){case 1:return"flex items-center bg-yellow-100";case 2:return"w-full bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-lg";case 3:return"ms-auto -my-1.5 text-yellow-500 rounded-lg focus:ring-2 focus:ring-yellow-400 p-1.5 hover:bg-yellow-200 inline-flex items-center justify-center h-8 w-8"}break}return""}static \u0275fac=function(i){return new(i||t)(f(_),f(D))};static \u0275cmp=g({type:t,selectors:[["app-message"]],inputs:{id:"id",fade:"fade"},standalone:!0,features:[h],decls:1,vars:1,consts:[["id","toast-top-right","role","alert",1,"fixed","items-center","w-full","md:max-w-md","max-w-xs","bg-white","rtl:divide-x-reverse","rounded-lg","shadow","top-5","right-5","z-50"],[3,"class"],[1,"text-lg","font-semibold"],[1,"text-sm","font-normal"],["type","button","aria-label","Close",3,"click"],[1,"sr-only"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"]],template:function(i,o){i&1&&u(0,Xe,3,0,"div",0),i&2&&m(o.messages.length!==0?0:-1)}})}return t})();var Ie=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Q({type:t});static \u0275inj=X({imports:[y]})}return t})();var Qe=()=>["/login"];function We(t,c){t&1&&(r(0,"a",0),s(1,"Login"),n()),t&2&&v("routerLink",C(1,Qe))}function Ye(t,c){if(t&1){let e=N();r(0,"div",1)(1,"a",3),w("click",function(){L(e);let o=d();return I(o.logout())}),s(2,"Logout"),n()()}}var Pe=(()=>{class t{accountService;userService;router;title="Challenge-ECommerce";constructor(e,i,o){this.accountService=e,this.userService=i,this.router=o}logout(){this.accountService.logout().then(()=>this.router.navigateByUrl("/login"))}get isLogged(){return this.userService.isLogged}static \u0275fac=function(i){return new(i||t)(f(M),f(E),f(_))};static \u0275cmp=g({type:t,selectors:[["app-root"]],standalone:!0,features:[ne([M,E]),h],decls:7,vars:1,consts:[[1,"bg-blue-50","text-blue-500","px-2","py-1","rounded",3,"routerLink"],[1,"flex","justify-items-center","items-center","gap-2"],[1,"max-w-screen-xl","min-h-screen-85","md:min-h-screen-90","mx-auto","mb-8","pt-10","px-4"],[1,"bg-blue-50","text-blue-500","px-2","py-1","rounded","cursor-hand",3,"click"]],template:function(i,o){i&1&&(r(0,"app-navbar"),u(1,We,2,2,"a",0)(2,Ye,3,0,"div",1),n(),l(3,"app-message"),r(4,"div",2),l(5,"router-outlet"),n(),l(6,"app-footer")),i&2&&(a(),m(o.isLogged?2:1))},dependencies:[ue,y,Fe,q,R,je,Ie,Le],styles:[".cursor-hand[_ngcontent-%COMP%]{cursor:pointer}"]})}return t})();ce(Pe,Te).catch(t=>console.error(t));
