import{a as c,n as s,o as n}from"./chunk-3RQMILY2.js";import{U as o,Z as i}from"./chunk-4HOZ256F.js";var a=(()=>{class e{http;broadcastService;static UserLoginEventName="UserLogin";static UserLogoutEventName="UserLogout";loginPromise=null;logoutPromise=null;constructor(r,t){this.http=r,this.broadcastService=t}login(r,t){return r=="user@ecommerce.com"&&t=="1234"?(this.broadcastService.broadcast(e.UserLoginEventName,{email:r,password:t}),this.loginPromise=Promise.resolve(!0)):this.loginPromise=Promise.reject("Invalid credentials"),this.loginPromise}logout(){return this.broadcastService.broadcast(e.UserLoginEventName,null),this.logoutPromise=Promise.resolve(),this.logoutPromise}static \u0275fac=function(t){return new(t||e)(i(c),i(s))};static \u0275prov=o({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var v=(()=>{class e{broadcastService;static CurrentUserChangedEventName="CurrentUserChanged";currentUserKey="current-user";_currentUser=n.getItem(this.currentUserKey);constructor(r){this.broadcastService=r,this.broadcastService.on(a.UserLoginEventName).subscribe(t=>{this.setCurrentUser(t)})}get isLogged(){return!!this._currentUser}get currentUser(){return this._currentUser}setCurrentUser(r){this._currentUser=r,n.setItem(this.currentUserKey,this._currentUser)}static \u0275fac=function(t){return new(t||e)(i(s))};static \u0275prov=o({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();export{a,v as b};
