import{a as Ke,b as ue,c as Z,d as ge,e as fe,f as he,g as J,h as _e,i as We,j as xe,k as Xe,l as ve,m as Ce,n as Te,o as et,p as ye,r as X,s as tt}from"./chunk-63WTHMUR.js";import{a as me,g as Ye,i as Ze,j as Je,l as j,q as K,r as W}from"./chunk-3RQMILY2.js";import"./chunk-SIB3WHKF.js";import{k as pe,l as Qe,n as N}from"./chunk-444QTUGO.js";import{Ab as R,B as ae,C as we,D as Se,Ea as Be,F as Pe,Fb as ze,Ha as a,Ia as q,L as A,N as Ee,Oa as O,P as I,Pb as He,Q as qe,R as ke,Ta as u,Tb as v,U as L,V as le,Va as H,Wa as Q,Ya as g,Z as G,_ as S,_a as Oe,a as y,ab as m,b,bb as k,ca as U,cb as M,da as ce,db as T,eb as i,fb as n,g as $e,gb as p,hb as Ae,ib as E,j as F,k as ne,ka as Re,l as je,lb as f,ma as h,mb as d,n as Le,na as _,oa as x,p as re,pa as z,pb as Me,qb as V,rb as Ge,t as oe,ta as Ne,tb as s,ub as $,vb as se,wb as de,xb as Y,yb as Ue}from"./chunk-4HOZ256F.js";var rt=(()=>{class t{http;messageService;url="https://fakestoreapi.com";constructor(e,r){this.http=e,this.messageService=r}getAll(){return this.http.get(`${this.url}/products/categories`).pipe(oe(e=>e.map(o=>({name:o}))),ae(e=>{throw this.messageService.error(e,"Error in source",{autoClose:!0}),e}))}static \u0275fac=function(r){return new(r||t)(G(me),G(X))};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ee=(()=>{class t{http;messageService;url="https://fakestoreapi.com";constructor(e,r){this.http=e,this.messageService=r}getAll(){return this.http.get(`${this.url}/products`).pipe(ae(e=>{throw this.messageService.error(e,"Error in source",{autoClose:!0}),e}))}getPage(e,r=8){let o=0;return this.http.get(`${this.url}/products`).pipe(ke(c=>o=c.length),Se(c=>c),Ee((e-1)*r),Pe(r),we(),I(c=>re({products:c,totalItems:o})))}get(e){return this.http.get(`${this.url}/products/${e}`)}findPage(e,r=6){let o=0;return this.http.get(`${this.url}/products`).pipe(oe(c=>c.filter(D=>this.filterProduct(D,e))),ke(c=>{o=c.length,e.sortedBy!=null&&this.sort(c,e.sortedBy)}),Se(c=>c),Ee((e.page-1)*r),Pe(r),we(),I(c=>re({products:c,totalItems:o})))}sort(e,r){e.sort((o,c)=>{switch(r){case 1:return o.rating.rate-c.rating.count;case 2:return o.price-c.price;case 3:return c.price-o.price;default:return o.rating.count-c.rating.count}})}filterProduct(e,r){let o=r.filter?.categories?.length===0||r.filter?.categories?.find(P=>P.name==e.category)!==void 0,c=r.filter?.prices?.length===0||r.filter?.prices?.find(P=>{switch(P){case 0:return e.price>=0&&e.price<50;case 1:return e.price>=50&&e.price<100;case 2:return e.price>=100&&e.price<150;case 3:return e.price>=150&&e.price<200;default:return e.price>=200}})!==void 0,D=r.filter?.text||"";return(e.title.search(new RegExp(D,"i"))!=-1||e.description.search(new RegExp(D,"i"))!=-1)&&o&&c}static \u0275fac=function(r){return new(r||t)(G(me),G(X))};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function w(t){t||(Re(w),t=S(Ne));let l=new $e(e=>t.onDestroy(e.next.bind(e)));return e=>e.pipe(qe(l))}var te={products:[],totalItems:0};var nt={page:1,filter:null,sortedBy:null};var De=(()=>{class t{productsService=S(ee);state=O({productsPage:te,status:"loading",currentPage:1,error:null});products=v(()=>this.state().productsPage.products);status=v(()=>this.state().status);currentPage=v(()=>this.state().currentPage);totalItems=v(()=>this.state().productsPage.totalItems);error=v(()=>this.state().error);retry$=new F;error$=new F;currentPage$=new ne(nt);productsForPage$=this.currentPage$.pipe(I(e=>e.filter?this.productsService.findPage(e).pipe(A({delay:r=>(this.error$.next(r),this.retry$)})):Le(re(te),je)));constructor(){this.productsForPage$.pipe(w()).subscribe(e=>this.state.update(r=>b(y({},r),{productsPage:e,status:"success"}))),this.currentPage$.pipe(w()).subscribe(e=>this.state.update(r=>b(y({},r),{currentPage:e.page,status:"loading",productsPage:{products:[],totalItems:0}}))),this.retry$.pipe(w()).subscribe(()=>this.state.update(e=>b(y({},e),{status:"loading"}))),this.error$.pipe(w()).subscribe(e=>{this.state.update(r=>b(y({},r),{status:"error",error:e.message}))})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:t.\u0275fac})}return t})();var ut=()=>[import("./chunk-OS6EFGHY.js").then(t=>t.PaginationComponent),import("./chunk-CHBWQSWI.js").then(t=>t.ProductComponent)],gt=(t,l)=>({button:t,"button-disabled":l}),be=(t,l)=>({"font-medium text-gray-900":t,"text-gray-500":l});function ft(t,l){t&1&&(i(0,"div"),s(1,"Text search is required."),n())}function ht(t,l){t&1&&(i(0,"div"),s(1," Text search must be at least 4 characters long. "),n())}function _t(t,l){if(t&1&&(i(0,"div",28),u(1,ft,2,0,"div")(2,ht,2,0,"div"),n()),t&2){let e=d(2);a(),m(e.textSearch.errors!=null&&e.textSearch.errors.required?1:-1),a(),m(e.textSearch.errors!=null&&e.textSearch.errors.minlength?2:-1)}}function xt(t,l){t&1&&(x(),i(0,"svg",32),p(1,"path",55),n())}function vt(t,l){t&1&&(x(),i(0,"svg",32),p(1,"path",56),n())}function Ct(t,l){if(t&1&&(i(0,"div",5),p(1,"input",58),i(2,"label",59),s(3),n()()),t&2){let e=l.$index,r=d(3);a(),V("id","filter-mobile-category-",e,""),g("formControlName",e),a(),V("for","filter-mobile-category-",e,""),a(),$(r.categoryList[e].name)}}function yt(t,l){if(t&1&&(i(0,"div",54)(1,"div",57),M(2,Ct,4,6,"div",5,k),n()()),t&2){let e=d(2);a(2),T(e.categories.controls)}}function bt(t,l){t&1&&(x(),i(0,"svg",32),p(1,"path",55),n())}function wt(t,l){t&1&&(x(),i(0,"svg",32),p(1,"path",56),n())}function St(t,l){if(t&1&&(i(0,"div",5),p(1,"input",58),i(2,"label",61),s(3),n()()),t&2){let e=l.$index,r=d(3);a(),V("id","filter-mobile-category-",e,""),g("formControlName",e),a(),V("for","filter-mobile-category-",e,""),a(),$(r.priceList[e])}}function Pt(t,l){if(t&1&&(i(0,"div",54)(1,"div",60),M(2,St,4,6,"div",5,k),n()()),t&2){let e=d(2);a(2),T(e.prices.controls)}}function Et(t,l){if(t&1){let e=E();i(0,"div",1),p(1,"div",41),i(2,"div",42)(3,"div",43)(4,"div",44)(5,"h2",45),s(6,"Filters"),n(),i(7,"button",46),f("click",function(){h(e);let o=d();return _(o.toggleFilterDialog())}),i(8,"span",12),s(9,"Close menu"),n(),x(),i(10,"svg",47),p(11,"path",48),n()()(),z(),i(12,"form",49),f("ngSubmit",function(){h(e);let o=d();return _(o.onSubmit())}),i(13,"div",50)(14,"h3",51)(15,"label",21),s(16,"Search"),n(),i(17,"div",22)(18,"div",23),x(),i(19,"svg",24),p(20,"path",25),n()(),z(),p(21,"input",26),i(22,"button",52),s(23,"Search"),n()(),u(24,_t,3,2,"div",28),n()(),i(25,"div",50)(26,"h3",51)(27,"button",53),f("click",function(){h(e);let o=d();return _(o.toggleCategoryMenu())}),i(28,"span",30),s(29,"Category"),n(),i(30,"span",31),u(31,xt,2,0,":svg:svg",32)(32,vt,2,0,":svg:svg",32),n()()(),u(33,yt,4,0,"div",54),n(),i(34,"div",50)(35,"h3",51)(36,"button",53),f("click",function(){h(e);let o=d();return _(o.togglePriceMenu())}),i(37,"span",30),s(38,"Price"),n(),i(39,"span",31),u(40,bt,2,0,":svg:svg",32)(41,wt,2,0,":svg:svg",32),n()()(),u(42,Pt,4,0,"div",54),n()()()()()}if(t&2){let e=d();a(12),g("formGroup",e.searchForm),a(10),g("disabled",!e.searchForm.valid),a(2),m(e.textSearch.invalid&&(e.textSearch.dirty||e.textSearch.touched)?24:-1),a(7),m(e.showCategoryMenu?-1:31),a(),m(e.showCategoryMenu?32:-1),a(),m(e.showCategoryMenu?33:-1),a(7),m(e.showPriceMenu?-1:40),a(),m(e.showPriceMenu?41:-1),a(),m(e.showPriceMenu?42:-1)}}function kt(t,l){if(t&1){let e=E();i(0,"div",10)(1,"div",62)(2,"a",63),f("click",function(){h(e);let o=d();return _(o.onSort(0))}),s(3,"Most Popular"),n(),i(4,"a",64),f("click",function(){h(e);let o=d();return _(o.onSort(1))}),s(5,"Best Rating"),n(),i(6,"a",65),f("click",function(){h(e);let o=d();return _(o.onSort(2))}),s(7,"Price: Low to High"),n(),i(8,"a",66),f("click",function(){h(e);let o=d();return _(o.onSort(3))}),s(9,"Price: High to Low"),n()()()}if(t&2){let e=d();a(2),g("ngClass",R(4,be,e.sortBy===0,e.sortBy!==0)),a(2),g("ngClass",R(7,be,e.sortBy===1,e.sortBy!==1)),a(2),g("ngClass",R(10,be,e.sortBy===2,e.sortBy!==2)),a(2),g("ngClass",R(13,be,e.sortBy===3,e.sortBy!==3))}}function Mt(t,l){t&1&&(i(0,"div"),s(1,"Text search is required."),n())}function Tt(t,l){t&1&&(i(0,"div"),s(1," Text search must be at least 4 characters long. "),n())}function Dt(t,l){if(t&1&&(i(0,"div",28),u(1,Mt,2,0,"div")(2,Tt,2,0,"div"),n()),t&2){let e=d();a(),m(e.textSearch.errors!=null&&e.textSearch.errors.required?1:-1),a(),m(e.textSearch.errors!=null&&e.textSearch.errors.minlength?2:-1)}}function Ft(t,l){t&1&&(x(),i(0,"svg",32),p(1,"path",55),n())}function It(t,l){t&1&&(x(),i(0,"svg",32),p(1,"path",56),n())}function Vt(t,l){if(t&1&&(i(0,"div",5),p(1,"input",58),i(2,"label",59),s(3),n()()),t&2){let e=l.$index,r=d(2);a(),V("id","filter-category-",e,""),g("formControlName",e),a(),V("for","filter-category-",e,""),a(),$(r.categoryList[e].name)}}function $t(t,l){if(t&1&&(i(0,"div",33)(1,"div",67),M(2,Vt,4,6,"div",5,k),n()()),t&2){let e=d();a(2),T(e.categories.controls)}}function jt(t,l){t&1&&(x(),i(0,"svg",32),p(1,"path",55),n())}function Lt(t,l){t&1&&(x(),i(0,"svg",32),p(1,"path",56),n())}function qt(t,l){if(t&1&&(i(0,"div",5),p(1,"input",58),i(2,"label",61),s(3),n()()),t&2){let e=l.$index,r=d(2);a(),V("id","filter-category-",e,""),g("formControlName",e),a(),V("for","filter-category-",e,""),a(),$(r.priceList[e])}}function Rt(t,l){if(t&1&&(i(0,"div",33)(1,"div",68),M(2,qt,4,6,"div",5,k),n()()),t&2){let e=d();a(2),T(e.prices.controls)}}function Nt(t,l){t&1&&p(0,"app-loading")}function Bt(t,l){if(t&1&&p(0,"app-product",70),t&2){let e=l.$implicit;g("product",e)}}function Ot(t,l){if(t&1){let e=E();i(0,"app-pagination",73),f("pageChange",function(o){h(e);let c=d(3);return _(c.pageChanged(o))}),n()}if(t&2){let e=d(3);g("currentPage",e.service.currentPage())("totalItems",e.service.totalItems())("pageSize",6)}}function At(t,l){t&1&&(i(0,"div",72)(1,"h1",74)(2,"span",75),s(3,"There are no products..."),n()()())}function Gt(t,l){if(t&1&&(i(0,"div",69),M(1,Bt,1,1,"app-product",70,k),n(),u(3,Ot,1,3,"app-pagination",71)(4,At,4,0,"div",72)),t&2){let e=d(2);a(),T(e.service.products()),a(2),m(e.service.totalItems()>0?3:4)}}function Ut(t,l){t&1&&p(0,"app-loading"),t&2&&Oe("big")}function zt(t,l){t&1&&(u(0,Gt,5,1)(1,Ut,1,2),H(2,0,ut,null,1),Q())}function Ht(t,l){if(t&1){let e=E();i(0,"app-error",76),f("reloadPage",function(){h(e);let o=d();return _(o.service.retry$.next())}),n()}if(t&2){let e=d();g("message",e.service.error()||"")}}var ot=(()=>{class t{categoriesService;service=S(De);showDropdownMenu=!1;showCategoryMenu=!1;showPriceMenu=!1;showFilterDialog=!1;categoryList=[];priceList=["$0 - $50","$50 - $100","$100 - $150","$150 - $200","$200+"];searchForm=new he({textSearch:new J("",[Z.required,Z.minLength(4)]),categories:new Te([]),prices:new Te([])});sortBy=0;constructor(e){this.categoriesService=e}ngOnInit(){this.priceList.forEach(e=>this.prices.push(new J(!1))),this.categoriesService.getAll().subscribe(e=>{this.categoryList=e,e.forEach(r=>this.categories.push(new J(!1)))})}toggleDropdownMenu(){this.showDropdownMenu=!this.showDropdownMenu}toggleCategoryMenu(){this.showDropdownMenu=!1,this.showCategoryMenu=!this.showCategoryMenu}togglePriceMenu(){this.showDropdownMenu=!1,this.showPriceMenu=!this.showPriceMenu}toggleFilterDialog(){this.showFilterDialog=!this.showFilterDialog}onSort(e){this.showDropdownMenu=!1,e!=this.sortBy&&(this.sortBy=e,this.service.totalItems()>0&&this.searchForm.valid&&this.pageChanged(1))}onSubmit(){this.showDropdownMenu=!1,this.showFilterDialog=!1,this.pageChanged(1)}pageChanged(e){this.service.currentPage$.next({page:e,filter:this.productFilter,sortedBy:this.sortBy})}get productFilter(){let e=[],r=[];return this.categories.controls.forEach((o,c)=>{o.value&&e.push(this.categoryList[c])}),this.prices.controls.forEach((o,c)=>{o.value&&r.push(c)}),{text:this.textSearch.value,categories:e,prices:r}}get textSearch(){return this.searchForm.get("textSearch")}get categories(){return this.searchForm.get("categories")}get prices(){return this.searchForm.get("prices")}static \u0275fac=function(r){return new(r||t)(q(rt))};static \u0275cmp=U({type:t,selectors:[["app-search-product"]],standalone:!0,features:[de([De]),Y],decls:66,vars:16,consts:[[1,"bg-white"],["role","dialog","aria-modal","true",1,"relative","z-40","lg:hidden"],[1,"mx-auto","max-w-7xl","px-4","sm:px-6","lg:px-8"],[1,"flex","items-baseline","justify-between","border-b","border-gray-200","pb-6"],[1,"text-4xl","font-bold","tracking-tight","text-gray-900"],[1,"flex","items-center"],[1,"relative","inline-block","text-left"],["type","button","id","menu-button","aria-expanded","false","aria-haspopup","true",1,"group","inline-flex","justify-center","text-sm","font-medium","text-gray-700","hover:text-gray-900",3,"click"],["viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"-mr-1","ml-1","h-5","w-5","flex-shrink-0","text-gray-400","group-hover:text-gray-500"],["fill-rule","evenodd","d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule","evenodd"],["role","menu","aria-orientation","vertical","aria-labelledby","menu-button","tabindex","-1",1,"absolute","right-0","z-10","mt-2","w-40","origin-top-right","rounded-md","bg-white","shadow-2xl","ring-1","ring-black","ring-opacity-5","focus:outline-none"],["type","button",1,"-m-2","ml-4","p-2","text-gray-400","hover:text-gray-500","sm:ml-6","lg:hidden",3,"click"],[1,"sr-only"],["aria-hidden","true","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M2.628 1.601C5.028 1.206 7.49 1 10 1s4.973.206 7.372.601a.75.75 0 01.628.74v2.288a2.25 2.25 0 01-.659 1.59l-4.682 4.683a2.25 2.25 0 00-.659 1.59v3.037c0 .684-.31 1.33-.844 1.757l-1.937 1.55A.75.75 0 018 18.25v-5.757a2.25 2.25 0 00-.659-1.591L2.659 6.22A2.25 2.25 0 012 4.629V2.34a.75.75 0 01.628-.74z","clip-rule","evenodd"],["aria-labelledby","products-heading",1,"pb-24","pt-6"],["id","products-heading",1,"sr-only"],[1,"grid","grid-cols-1","gap-x-8","gap-y-10","lg:grid-cols-4"],[1,"hidden","lg:block",3,"ngSubmit","formGroup"],[1,"border-b","border-gray-200","py-6"],[1,"-my-3","flow-root"],["for","default-search",1,"mb-2","text-sm","font-medium","text-gray-900","sr-only","dark:text-white"],[1,"relative"],[1,"absolute","inset-y-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","search","id","textSearch","name","textSearch","formControlName","textSearch","placeholder","Search Title, Description...","required","",1,"block","w-full","p-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500"],["type","submit",3,"disabled","ngClass"],[1,"alert","alert-danger"],["type","button","aria-controls","filter-section-1","aria-expanded","false",1,"flex","w-full","items-center","justify-between","bg-white","py-3","text-sm","text-gray-400","hover:text-gray-500",3,"click"],[1,"font-medium","text-gray-900"],[1,"ml-6","flex","items-center"],["viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5"],["id","filter-section-1",1,"pt-6"],[1,"lg:col-span-3"],[1,"relative","h-96","overflow-hidden","rounded-xl","border","border-dashed","border-gray-400","opacity-75","lg:h-full"],["fill","none",1,"absolute","inset-0","h-full","w-full","stroke-gray-900/10"],["id","pattern-4d2f8758-2f66-4332-9b69-ca19e9dfc001","x","0","y","0","width","10","height","10","patternUnits","userSpaceOnUse"],["d","M-3 13 15-5M-5 5l18-18M-1 21 17 3"],["stroke","none","fill","url(#pattern-4d2f8758-2f66-4332-9b69-ca19e9dfc001)","width","100%","height","100%"],[1,"group","relative",3,"message"],["aria-hidden","true",1,"fixed","inset-0","bg-black","bg-opacity-25"],[1,"fixed","inset-0","z-40","flex"],[1,"relative","ml-auto","flex","h-full","w-full","max-w-xs","flex-col","overflow-y-auto","bg-white","py-4","shadow-xl"],[1,"flex","items-center","justify-between","px-4"],[1,"text-lg","font-medium","text-gray-900"],["type","button",1,"-mr-2","flex","h-10","w-10","items-center","justify-center","rounded-md","bg-white","p-2","text-gray-400",3,"click"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"mt-4","border-t","border-gray-200",3,"ngSubmit","formGroup"],[1,"border-t","border-gray-200","px-4","py-6"],[1,"-mx-2","-my-3","flow-root"],["type","submit",1,"text-white","absolute","end-2.5","bottom-2.5","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-4","py-2","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"disabled"],["type","button","aria-controls","filter-section-mobile-1","aria-expanded","false",1,"flex","w-full","items-center","justify-between","bg-white","px-2","py-3","text-gray-400","hover:text-gray-500",3,"click"],["id","filter-section-mobile-1",1,"pt-6"],["d","M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"],["fill-rule","evenodd","d","M4 10a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H4.75A.75.75 0 014 10z","clip-rule","evenodd"],["formArrayName","categories",1,"space-y-6"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"id","formControlName"],[1,"ml-3","min-w-0","flex-1","text-gray-500",3,"for"],["formArrayName","prices",1,"space-y-6"],[1,"ml-3","text-sm","text-gray-600",3,"for"],["role","none",1,"py-1"],["role","menuitem","tabindex","-1","id","menu-item-0",1,"block","px-4","py-2","text-sm","cursor-hand",3,"click","ngClass"],["role","menuitem","tabindex","-1","id","menu-item-1",1,"block","px-4","py-2","text-sm","cursor-hand",3,"click","ngClass"],["role","menuitem","tabindex","-1","id","menu-item-3",1,"block","px-4","py-2","text-sm","cursor-hand",3,"click","ngClass"],["role","menuitem","tabindex","-1","id","menu-item-4",1,"block","px-4","py-2","text-sm","cursor-hand",3,"click","ngClass"],["formArrayName","categories",1,"space-y-4"],["formArrayName","prices",1,"space-y-4"],[1,"mt-6","mr-2","ml-2","mb-6","grid","grid-cols-1","gap-x-6","gap-y-10","sm:grid-cols-2","lg:grid-cols-3","xl:gap-x-4"],[3,"product"],[1,"group","relative",3,"currentPage","totalItems","pageSize"],[1,"flex","items-center","justify-center","h-full","w-full"],[1,"group","relative",3,"pageChange","currentPage","totalItems","pageSize"],[1,"text-base","sm:text-2xl","font-bold","tracking-tight","text-center"],[1,"text-gray-500"],[1,"group","relative",3,"reloadPage","message"]],template:function(r,o){if(r&1&&(i(0,"section")(1,"div",0)(2,"div"),u(3,Et,43,9,"div",1),i(4,"main",2)(5,"div",3)(6,"h1",4),s(7,"Search Products"),n(),i(8,"div",5)(9,"div",6)(10,"div")(11,"button",7),f("click",function(){return o.toggleDropdownMenu()}),s(12," Sort "),x(),i(13,"svg",8),p(14,"path",9),n()()(),u(15,kt,10,16,"div",10),n(),z(),i(16,"button",11),f("click",function(){return o.toggleFilterDialog()}),i(17,"span",12),s(18,"Filters"),n(),x(),i(19,"svg",13),p(20,"path",14),n()()()(),z(),i(21,"section",15)(22,"h2",16),s(23,"Products"),n(),i(24,"div",17)(25,"form",18),f("ngSubmit",function(){return o.onSubmit()}),i(26,"div",19)(27,"h3",20)(28,"label",21),s(29,"Search"),n(),i(30,"div",22)(31,"div",23),x(),i(32,"svg",24),p(33,"path",25),n()(),z(),p(34,"input",26),i(35,"button",27),s(36,"Search"),n()(),u(37,Dt,3,2,"div",28),n()(),i(38,"div",19)(39,"h3",20)(40,"button",29),f("click",function(){return o.toggleCategoryMenu()}),i(41,"span",30),s(42,"Category"),n(),i(43,"span",31),u(44,Ft,2,0,":svg:svg",32)(45,It,2,0,":svg:svg",32),n()()(),u(46,$t,4,0,"div",33),n(),i(47,"div",19)(48,"h3",20)(49,"button",29),f("click",function(){return o.togglePriceMenu()}),i(50,"span",30),s(51,"Price"),n(),i(52,"span",31),u(53,jt,2,0,":svg:svg",32)(54,Lt,2,0,":svg:svg",32),n()()(),u(55,Rt,4,0,"div",33),n()(),i(56,"div",34)(57,"div",35),x(),i(58,"svg",36)(59,"defs")(60,"pattern",37),p(61,"path",38),n()(),p(62,"rect",39),n(),u(63,Nt,1,0,"app-loading")(64,zt,4,0)(65,Ht,1,1,"app-error",40),n()()()()()()()()),r&2){let c;a(3),m(o.showFilterDialog?3:-1),a(12),m(o.showDropdownMenu?15:-1),a(10),g("formGroup",o.searchForm),a(10),g("disabled",!o.searchForm.valid)("ngClass",R(13,gt,o.searchForm.valid,!o.searchForm.valid)),a(2),m(o.textSearch.invalid&&(o.textSearch.dirty||o.textSearch.touched)?37:-1),a(7),m(o.showCategoryMenu?-1:44),a(),m(o.showCategoryMenu?45:-1),a(),m(o.showCategoryMenu?46:-1),a(7),m(o.showPriceMenu?-1:53),a(),m(o.showPriceMenu?54:-1),a(),m(o.showPriceMenu?55:-1),a(8),m((c=o.service.status())==="loading"?63:c==="success"?64:c==="error"?65:-1)}},dependencies:[N,pe,ye,_e,ue,Ke,ge,fe,Ce,xe,ve,Xe,et,j,W,K],styles:[".button-disabled[_ngcontent-%COMP%]{position:absolute;inset-inline-end:.625rem;bottom:.625rem;cursor:not-allowed;border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));color:#11182780}.button[_ngcontent-%COMP%]{position:absolute;inset-inline-end:.625rem;bottom:.625rem;border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity));padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.button[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(30 64 175 / var(--tw-bg-opacity))}.button[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(147 197 253 / var(--tw-ring-opacity))}.cursor-hand[_ngcontent-%COMP%]{cursor:pointer}"]})}return t})();var Qt=()=>[pe,_e,ue,We,ge,fe,Ce,xe,ve,Je,import("./chunk-2T4DTPKE.js").then(t=>t.ShowDescriptionDirective)],Yt=()=>["/products/product-search"],Zt=(t,l)=>({button:t,"button-disabled":l});function Jt(t,l){t&1&&p(0,"app-loading")}function Kt(t,l){t&1&&Ae(0)}function Wt(t,l){if(t&1&&u(0,Kt,1,0,"ng-container",3),t&2){d();let e=Ge(6);g("ngTemplateOutlet",e)}}function Xt(t,l){if(t&1){let e=E();i(0,"app-error",4),f("reloadPage",function(){h(e);let o=d();return _(o.retry$.next())}),n()}if(t&2){let e=d();g("message",e.error()||"")}}function ei(t,l){t&1&&(x(),i(0,"svg",21),p(1,"path",32),n())}function ti(t,l){t&1&&(i(0,"div"),s(1,"Quantity is required."),n())}function ii(t,l){t&1&&(i(0,"div"),s(1,"Quantity must be greater than zero."),n())}function ri(t,l){if(t&1&&(i(0,"div",27),u(1,ti,2,0,"div")(2,ii,2,0,"div"),n()),t&2){let e=d(3);a(),m(e.quantity.errors!=null&&e.quantity.errors.required?1:-1),a(),m(e.quantity.errors!=null&&e.quantity.errors.min?2:-1)}}function ni(t,l){if(t&1){let e=E();i(0,"div",5)(1,"nav",6)(2,"ol",7)(3,"li",8)(4,"a",9),s(5),n()()()(),i(6,"div",10)(7,"div",11),p(8,"img",12),n()(),i(9,"div",13)(10,"div",14)(11,"h1",15),s(12),n()(),i(13,"div",16)(14,"h2",17),s(15,"Product information"),n(),i(16,"p",18),s(17),n(),i(18,"div",19)(19,"h3",17),s(20,"Reviews"),n(),i(21,"div",20)(22,"div",20),M(23,ei,2,0,":svg:svg",21,k),n(),i(25,"p",17),s(26),n(),i(27,"p",22),s(28),n()()(),i(29,"form",23),f("ngSubmit",function(){h(e);let o=d(2);return _(o.onSubmit())}),i(30,"div")(31,"label",24),s(32,"Quantity"),n(),i(33,"div",25),p(34,"input",26),u(35,ri,3,2,"div",27),n()(),i(36,"div")(37,"button",28),s(38,"Add to cart"),n()()()(),i(39,"div",29)(40,"div")(41,"h3",17),s(42,"Description"),n(),i(43,"div",30)(44,"p",31),s(45),n()()()()()()}if(t&2){let e,r,o,c,D,P,ie,Ve,C=d(2);a(4),g("routerLink",Ue(13,Yt)),a(),$((e=C.product())==null?null:e.category),a(3),Me("src",(r=C.product())==null?null:r.image,Be),Me("alt",(o=C.product())==null?null:o.title),a(4),$((c=C.product())==null?null:c.title),a(5),se("$",(D=C.product())==null?null:D.price,""),a(6),T(C.rate),a(3),se("",(P=C.product())==null||P.rating==null?null:P.rating.rate," out of 5 stars"),a(2),se("",(ie=C.product())==null||ie.rating==null?null:ie.rating.count," reviews"),a(),g("formGroup",C.cartForm),a(6),m(C.quantity.invalid&&(C.quantity.dirty||C.quantity.touched)?35:-1),a(2),g("disabled",!C.cartForm.valid)("ngClass",R(14,Zt,C.cartForm.valid,!C.cartForm.valid)),a(8),$((Ve=C.product())==null?null:Ve.description)}}function oi(t,l){t&1&&p(0,"app-loading")}function ai(t,l){t&1&&(u(0,ni,46,17)(1,oi,1,0),H(2,0,Qt,null,1),Q())}var at=(()=>{class t{route;productsService;ref;messageService;router;store=S(tt);cartForm=new he({quantity:new J(1,[Z.required,Z.min(1)])});state=O({product:null,status:"loading",error:null});product=v(()=>this.state().product);status=v(()=>this.state().status);error=v(()=>this.state().error);retry$=new F;error$=new F;constructor(e,r,o,c,D){this.route=e,this.productsService=r,this.ref=o,this.messageService=c,this.router=D,this.retry$.pipe(w()).subscribe(()=>this.state.update(P=>b(y({},P),{status:"loading"}))),this.error$.pipe(w()).subscribe(P=>{this.state.update(ie=>b(y({},ie),{status:"error",error:P.message}))})}ngOnInit(){this.route.paramMap.pipe(I(e=>{let r=Number(e.get("id"));return this.productsService.get(r).pipe(A({delay:o=>(this.error$.next(o),this.retry$)}))})).subscribe(e=>{this.state.update(r=>b(y({},r),{product:e,status:"success"})),this.ref.markForCheck()})}onSubmit(){this.product()&&(this.store.setCartItem({id:this.product()?.id||0,product:this.product()||{},quantity:parseInt(this.quantity.value)}),this.messageService.success(`Update ${this.quantity.value} '${this.product()?.title}'.`,"Shopping Card: Update successful",{autoClose:!0,keepAfterRouteChange:!0}),this.router.navigateByUrl("/products/product-search"))}get rate(){return Array.from(Array(Math.ceil(this.product()?.rating.rate||0)).keys())}get quantity(){return this.cartForm.get("quantity")}static \u0275fac=function(r){return new(r||t)(q(Ye),q(ee),q(He),q(X),q(Ze))};static \u0275cmp=U({type:t,selectors:[["app-product-detail"]],standalone:!0,features:[Y],decls:7,vars:1,consts:[["detail",""],[1,"bg-white"],[3,"message"],[4,"ngTemplateOutlet"],[3,"reloadPage","message"],[1,"pt-6"],["aria-label","Breadcrumb"],["role","list",1,"mx-auto","flex","max-w-2xl","items-center","space-x-2","px-4","sm:px-6","lg:max-w-7xl","lg:px-8"],[1,"text-sm"],["aria-current","page",1,"font-medium","text-gray-500","hover:text-gray-600",3,"routerLink"],[1,"mx-auto","mt-6","max-w-2xl","sm:px-6","lg:grid","lg:max-w-7xl","lg:grid-cols-3","lg:gap-x-8","lg:px-8"],[1,"aspect-h-5","aspect-w-4","lg:aspect-h-4","lg:aspect-w-3","sm:overflow-hidden","sm:rounded-lg"],[1,"h-full","w-full","object-cover","object-center",3,"src","alt"],[1,"mx-auto","max-w-2xl","px-4","pb-16","pt-10","sm:px-6","lg:grid","lg:max-w-7xl","lg:grid-cols-3","lg:grid-rows-[auto,auto,1fr]","lg:gap-x-8","lg:px-8","lg:pb-24","lg:pt-16"],[1,"lg:col-span-2","lg:border-r","lg:border-gray-200","lg:pr-8"],["showDescription","",1,"text-2xl","font-bold","tracking-tight","text-gray-900","sm:text-3xl"],[1,"mt-4","lg:row-span-3","lg:mt-0"],[1,"sr-only"],[1,"text-3xl","tracking-tight","text-gray-900"],[1,"mt-6"],[1,"flex","items-center"],["viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","flex-shrink-0","text-gray-900"],[1,"ml-3","text-sm","font-medium","text-indigo-600","hover:text-indigo-500"],[1,"mt-10",3,"ngSubmit","formGroup"],["for","quantity",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["id","quantity","name","quantity","type","quantity","required","","type","number","formControlName","quantity",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[1,"alert","alert-danger"],["type","submit",3,"disabled","ngClass"],[1,"py-10","lg:col-span-2","lg:col-start-1","lg:border-r","lg:border-gray-200","lg:pb-16","lg:pr-8","lg:pt-6"],[1,"space-y-6"],[1,"text-base","text-gray-900"],["fill-rule","evenodd","d","M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z","clip-rule","evenodd"]],template:function(r,o){if(r&1&&(i(0,"section")(1,"div",1),u(2,Jt,1,0,"app-loading")(3,Wt,1,1,"ng-container")(4,Xt,1,1,"app-error",2),n()(),u(5,ai,4,0,"ng-template",null,0,ze)),r&2){let c;a(2),m((c=o.status())==="loading"?2:c==="success"?3:c==="error"?4:-1)}},dependencies:[N,Qe,ye,j,W,K],styles:[".button-disabled[_ngcontent-%COMP%]{margin-top:2.5rem;display:flex;width:100%;cursor:not-allowed;align-items:center;justify-content:center;border-radius:.375rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding:.75rem 2rem;font-weight:500;color:#11182780}.button[_ngcontent-%COMP%]{margin-top:2.5rem;display:flex;width:100%;align-items:center;justify-content:center;border-radius:.375rem;border-width:1px;border-color:transparent;--tw-bg-opacity: 1;background-color:rgb(79 70 229 / var(--tw-bg-opacity));padding:.75rem 2rem;font-size:1rem;line-height:1.5rem;font-weight:500;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.button[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(67 56 202 / var(--tw-bg-opacity))}.button[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(99 102 241 / var(--tw-ring-opacity));--tw-ring-offset-width: 2px }"],changeDetection:0})}return t})();var Fe=(()=>{class t{productsService=S(ee);state=O({productsPage:te,status:"loading",currentPage:1,error:null});products=v(()=>this.state().productsPage.products);status=v(()=>this.state().status);currentPage=v(()=>this.state().currentPage);totalItems=v(()=>this.state().productsPage.totalItems);error=v(()=>this.state().error);retry$=new F;error$=new F;currentPage$=new ne(1);productsForPage$=this.currentPage$.pipe(I(e=>this.productsService.getPage(e).pipe(A({delay:r=>(this.error$.next(r),this.retry$)}))));constructor(){this.productsForPage$.pipe(w()).subscribe(e=>this.state.update(r=>b(y({},r),{productsPage:e,status:"success"}))),this.currentPage$.pipe(w()).subscribe(e=>this.state.update(r=>b(y({},r),{currentPage:e,status:"loading",productsPage:te}))),this.retry$.pipe(w()).subscribe(()=>this.state.update(e=>b(y({},e),{status:"loading"}))),this.error$.pipe(w()).subscribe(e=>{this.state.update(r=>b(y({},r),{status:"error",error:e.message}))})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:t.\u0275fac})}return t})();var li=()=>[import("./chunk-CHBWQSWI.js").then(t=>t.ProductComponent),import("./chunk-OS6EFGHY.js").then(t=>t.PaginationComponent)];function ci(t,l){t&1&&p(0,"app-loading")}function si(t,l){if(t&1&&p(0,"app-product",5),t&2){let e=l.$implicit;g("product",e)}}function di(t,l){if(t&1){let e=E();i(0,"app-pagination",8),f("pageChange",function(o){h(e);let c=d(3);return _(c.service.currentPage$.next(o))}),n()}if(t&2){let e=d(3);g("currentPage",e.service.currentPage())("totalItems",e.service.totalItems())}}function pi(t,l){t&1&&(i(0,"div",7)(1,"h1",9)(2,"span",10),s(3,"There are no products..."),n()()())}function mi(t,l){if(t&1&&(i(0,"div",4),M(1,si,1,1,"app-product",5,k),n(),u(3,di,1,2,"app-pagination",6)(4,pi,4,0,"div",7)),t&2){let e=d(2);a(),T(e.service.products()),a(2),m(e.service.totalItems()>0?3:4)}}function ui(t,l){t&1&&p(0,"app-loading")}function gi(t,l){t&1&&(u(0,mi,5,1)(1,ui,1,0),H(2,0,li,null,1),Q())}function fi(t,l){if(t&1){let e=E();i(0,"app-error",11),f("reloadPage",function(){h(e);let o=d();return _(o.service.retry$.next())}),n()}if(t&2){let e=d();g("message",e.service.error()||"")}}var Ie=(()=>{class t{service=S(Fe);static \u0275fac=function(r){return new(r||t)};static \u0275cmp=U({type:t,selectors:[["app-products"]],standalone:!0,features:[de([Fe]),Y],decls:8,vars:1,consts:[[1,"bg-white"],[1,"mx-auto","max-w-2xl","px-4","sm:px-6","lg:max-w-7xl","lg:px-8"],[1,"text-4xl","font-bold","tracking-tight","text-gray-900"],[3,"message"],[1,"mt-6","grid","grid-cols-1","gap-x-6","gap-y-10","sm:grid-cols-2","lg:grid-cols-4","xl:gap-x-8"],[3,"product"],[3,"currentPage","totalItems"],[1,"flex","items-center","justify-center","h-full","w-full"],[3,"pageChange","currentPage","totalItems"],[1,"text-base","sm:text-2xl","font-bold","tracking-tight","text-center"],[1,"text-gray-500"],[3,"reloadPage","message"]],template:function(r,o){if(r&1&&(i(0,"section")(1,"div",0)(2,"div",1)(3,"h2",2),s(4,"Products"),n(),u(5,ci,1,0,"app-loading")(6,gi,4,0)(7,fi,1,1,"app-error",3),n()()()),r&2){let c;a(5),m((c=o.service.status())==="loading"?5:c==="success"?6:c==="error"?7:-1)}},dependencies:[N,j,W,K]})}return t})();var hi=[{path:"product-search",component:ot},{path:"product-detail/:id",component:at},{path:"",component:Ie,pathMatch:"full"},{path:"**",component:Ie,pathMatch:"full"}],lt=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=ce({type:t});static \u0275inj=le({imports:[j.forChild(hi),j]})}return t})();var Rr=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=ce({type:t});static \u0275inj=le({imports:[N,lt]})}return t})();export{Rr as ProductsModule};
